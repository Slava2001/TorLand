<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>wdrop</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="github_link" onclick='location.href="https://github.com/Slava2001"'>
                <div class="github_link_img">
                    <img alt="" src="https://avatars.githubusercontent.com/u/45189467?v=4">
                </div>
                <div class="github_link_text">
                    <p>GitHub/Slava</p>
                </div>
            </div>

            <div class="menu">
                <ul>
					<li><a href="/">Главная</a></li>
					<li><a href="compiler">Компилятор</a></li>
				</ul>
            </div>

        </div>
    </header>
    <section>
        <div class="container">
            <canvas id="canvas" height="10" width="10"></canvas>
            <div class="controls">
                <label for="world_size">World size:</label>
                <input type="number" id="world_size" name="world_size" min="5" max="100" value="10">
                <label for="bot_code">Bot:</label>
                <input type="text" id="bot_code" name="bot_code">
                <button id="run">run</button>
                <label for="fps">FPS:</label>
                <input type="number" id="fps" name="fps" min="1" max="100" value="5">
            </div>
            
        </div>
        <script type="module">
            import init, { WorldWraper } from '/torland/torland.js';
            init();

            const canvas = document.getElementById("canvas");
            const world_size = document.getElementById("world_size");
            const bot_code = document.getElementById("bot_code");
            const fps = document.getElementById("fps");
            
            let world;
            let timer;
            function update() {
                world.update()
                world.draw(canvas.getContext("2d"));
                timer = setTimeout(update, 1000/fps.value);
            }
            function run() {
                world = WorldWraper.new(world_size.value, bot_code.value);
                canvas.height = world_size.value;
                canvas.width = world_size.value;
                if (!timer) {
                    update();
                }
            }
            document.getElementById("run").onclick = run;
        </script>
    </section>
    <footer>
        <div class="container">
            <p>email: slavakaplya20011501@gmail.com</p>
        </div>
    </footer>
</body>

</html>
